#include<bits/stdc++.h>
using namespace std ; 

string encrypt(string pt , string key){
	int t = 0 ;   // here  t is to iterate over text
	char matrix[100][100]  ;  
	while(pt.length()%key.length())pt+="x" ;
	int totalRows = pt.length()/key.length() ; 

	for(int r = 0 ; r < totalRows ; cout<<endl ,  r++){
		for(int c = 0 ; c < key.length() ; c++){
			cout<< (matrix[r][c] = pt[t++]) <<'\t' ; 
		}
	}
	string ct ="" ;
	for(char c= '1'  ;  c <= '0'+key.length() ; c++){	
		int col = key.find(c) ;
		for(int i =0 ; i < totalRows ; i++) ct+= matrix[i][col] ; 
	}
	return ct ; 
}

string decrypt(string ct , string key){
	char matrix[100][100]  ; string pt="" ; 
	int t= 0 , totalRows = ceil(ct.length()/key.length()) ;  //t is text iterator
	for(char c='1' ; c<='0'+key.length() ; c++){
		int col = key.find(c) ;
		for(int i= 0 ; i < totalRows ; i++){
			matrix[i][col] = ct[t++] ; 
		}
	}
	for(int i =0 ; i < totalRows ; i++){
		for(int j =0 ;j <key.length() ; j++) pt+=matrix[i][j] ; 	
	}
	return pt ; 
}

int main(void){
	string pt, key ; 
	cout<<"Enter message : " ; cin>>pt ; 
	cout<<"Enter key : " ; cin>>key ; 
	string ct = encrypt(pt , key) ; 
	cout<<"Original text 		: " << pt <<endl; 
	cout<<"Cipher   text		: " << ct <<endl; 
	cout<<"Decrypted text		: " <<  decrypt(ct , key) <<endl; 
}

